# Week1: 基本機能の実装

## タスク一覧

### 1. 環境設定およびハードウェアセットアップ
- [x] Raspberry Pi OSのインストールと初期設定
  - [x] Raspberry Pi OSイメージのダウンロード
  - [x] SDカードへの書き込み
  - [x] 初期設定（ロケール、タイムゾーン、Wi-Fi設定など）
- [ ] カメラモジュール、ディスプレイ、マイクの接続と動作確認
  - [x] カメラモジュールの接続と有効化
  - [ ] ディスプレイの接続と表示確認
  - [ ] マイクの接続と音声入力テスト
- [x] 必要なライブラリと依存関係のインストール
  - [x] Python 3.xのインストール確認
  - [x] 必要なPythonライブラリのインストール（`pip3 install -r requirements.txt`）

### 2. フォトフレーム機能の実装（tkinter版）
- [x] `photoframe_tkinter.py` の実装
  - [x] 画像取得機能の実装
  - [x] tkinterを使用した画像表示機能の実装
- [x] スライドショー機能（画像の自動表示）の追加
  - [x] 画像の自動切り替えロジックの実装
  - [x] 表示間隔の設定と調整
- [x] `main.py` からフォトフレームモードを起動できるように設定
  - [] モード選択ロジックの追加
  - [x] フォトフレームモード起動の確認

### 3. 写真撮影機能の基礎実装
- [x] `photo_capture.py` の実装
  - [x] カメラ制御機能の実装
  - [x] 写真撮影と保存機能の実装
- [x] カメラからの写真撮影テスト
  - [x] 撮影テストスクリプトの実行
  - [x] 撮影画像の確認
- [x] 撮影画像の保存先ディレクトリ設定と動作確認
  - [x] 保存ディレクトリの作成とパーミッション設定
  - [x] 保存先パスの設定確認

### 4. システムの基本的な動作確認
- [ ] フォトフレームと写真撮影が個別に動作することを確認
  - [ ] フォトフレームモードの動作確認
  - [ ] 写真撮影機能の動作確認
- [ ] システム全体のディレクトリ構造とファイル管理の確認
  - [ ] ディレクトリ構造の確認
  - [ ] ファイル保存とアクセスの確認

# Week2: 音声認識およびモード切替機能の実装

## タスク一覧

### 1. 音声認識モジュールの統合
- [ ] `voice_commands.py` の実装
  - [ ] 音声認識ライブラリの設定
  - [ ] 音声コマンドの基本的な認識機能の実装
- [ ] 音声コマンドの基本的な認識テスト
  - [ ] テストコマンドの実行と認識結果の確認
  - [ ] 認識精度の評価と調整
- [ ] 音声コマンドによる「写真撮影」の実行確認
  - [ ] 「写真撮影」コマンドの動作確認
  - [ ] 撮影後の画像保存と表示の確認

### 2. モード切替機能の実装
- [ ] 音声コマンドによる「フォトフレームモード」および「写真撮影モード」への切替機能の実装
  - [ ] モード切替ロジックの実装
  - [ ] 各モードの起動と終了の確認
- [ ] `main.py` でのモード管理ロジックの統合
  - [ ] モード管理のスレッド処理の実装
  - [ ] モード切替時のリソース管理確認

### 3. 無操作時の自動切替機能
- [ ] `monitor_activity.py` の実装
  - [ ] 無操作検出ロジックの実装
  - [ ] タイマー設定とカウントダウン機能の実装
- [ ] 無操作時のフォトフレームモードへの自動切替確認
  - [ ] タイマー動作のテスト
  - [ ] 自動切替の動作確認
- [ ] タイマー設定と動作確認
  - [ ] `config.yaml` にタイマー設定の追加
  - [ ] 設定値に基づく動作確認

### 4. システム統合テスト
- [ ] 音声認識とモード切替機能の統合テスト
  - [ ] 各音声コマンドの動作確認
  - [ ] モード切替時のシステム挙動確認
- [ ] 無操作時の自動切替と音声認識の併用テスト
  - [ ] 両機能の同時動作確認
  - [ ] バグの発見と修正

# Week2: 音声認識およびモード切替機能の実装

## タスク一覧

### 1. 音声認識モジュールの統合
- [ ] `voice_commands.py` の実装
  - [ ] 音声認識ライブラリの設定
  - [ ] 音声コマンドの基本的な認識機能の実装
- [ ] 音声コマンドの基本的な認識テスト
  - [ ] テストコマンドの実行と認識結果の確認
  - [ ] 認識精度の評価と調整
- [ ] 音声コマンドによる「写真撮影」の実行確認
  - [ ] 「写真撮影」コマンドの動作確認
  - [ ] 撮影後の画像保存と表示の確認

### 2. モード切替機能の実装
- [ ] 音声コマンドによる「フォトフレームモード」および「写真撮影モード」への切替機能の実装
  - [ ] モード切替ロジックの実装
  - [ ] 各モードの起動と終了の確認
- [ ] `main.py` でのモード管理ロジックの統合
  - [ ] モード管理のスレッド処理の実装
  - [ ] モード切替時のリソース管理確認

### 3. 無操作時の自動切替機能
- [ ] `monitor_activity.py` の実装
  - [ ] 無操作検出ロジックの実装
  - [ ] タイマー設定とカウントダウン機能の実装
- [ ] 無操作時のフォトフレームモードへの自動切替確認
  - [ ] タイマー動作のテスト
  - [ ] 自動切替の動作確認
- [ ] タイマー設定と動作確認
  - [ ] `config.yaml` にタイマー設定の追加
  - [ ] 設定値に基づく動作確認

### 4. システム統合テスト
- [ ] 音声認識とモード切替機能の統合テスト
  - [ ] 各音声コマンドの動作確認
  - [ ] モード切替時のシステム挙動確認
- [ ] 無操作時の自動切替と音声認識の併用テスト
  - [ ] 両機能の同時動作確認
  - [ ] バグの発見と修正

# Week2: NAS機能およびウェブインターフェースの実装

## タスク一覧

### 1. Sambaによるファイル共有の設定
- [ ] Sambaのインストール
  - [ ] `sudo apt-get install samba samba-common-bin` の実行
  - [ ] インストール確認
- [ ] 共有フォルダ設定の編集
  - [ ] `/etc/samba/smb.conf` の編集
  - [ ] `[photos]` セクションの追加と設定
- [ ] ユーザー設定の実施
  - [ ] Sambaユーザーの追加（`sudo smbpasswd -a pi`）
  - [ ] パーミッションの確認
- [ ] ファイル共有フォルダへのアクセス確認
  - [ ] ローカルネットワーク内からのアクセステスト
  - [ ] ファイルのアップロード・ダウンロードの確認
- [ ] Sambaサービスの再起動と動作確認
  - [ ] `sudo systemctl restart smbd` の実行
  - [ ] サービス状態の確認（`sudo systemctl status smbd`）

### 2. ウェブインターフェースの構築
- [ ] `web_app.py` の実装
  - [ ] Flaskアプリケーションの初期設定
  - [ ] 基本的なダッシュボードの作成
- [ ] 写真のアップロード・ダウンロード機能の実装
  - [ ] アップロードフォームの実装
  - [ ] ダウンロードリンクの実装
- [ ] ユーザー認証機能の実装とセキュリティ確認
  - [ ] Flask-HTTPAuthによる基本認証の実装
  - [ ] パスワードのハッシュ化と管理
- [ ] テンプレートファイルの作成
  - [ ] `templates/dashboard.html` の作成
  - [ ] レイアウトとスタイリングの確認
- [ ] ウェブインターフェースの動作確認
  - [ ] ローカルネットワーク内からのアクセステスト
  - [ ] 各機能の動作確認（アップロード、ダウンロード、認証）

### 3. システム統合テスト
- [ ] Sambaとウェブインターフェースの連携テスト
  - [ ] ファイル共有とウェブインターフェース間の整合性確認
- [ ] ユーザー認証のセキュリティテスト
  - [ ] 不正アクセス試行と防御機能の確認
- [ ] ウェブインターフェースのパフォーマンステスト
  - [ ] 同時アクセス時の動作確認
  - [ ] レスポンス速度の評価

# Week2: 笑顔検出機能およびセキュリティ強化

## タスク一覧

### 1. 笑顔検出機能の実装
- [ ] `smile_detection.py` の実装
  - [ ] OpenCVによる顔検出と笑顔検出の設定
  - [ ] 笑顔検出時の自動撮影ロジックの実装
- [ ] カメラ映像での笑顔検出テスト
  - [ ] リアルタイム映像解析の動作確認
  - [ ] 笑顔検出精度の評価と調整
- [ ] 自動撮影機能の確認
  - [ ] 笑顔検出後のカウントダウンと撮影動作の確認
  - [ ] 撮影画像の保存と表示確認

### 2. セキュリティ強化
#### 2.1 ファイアウォール設定（UFW）の適用
- [ ] UFWのインストールと有効化
  - [ ] `sudo apt-get install ufw` の実行
  - [ ] `sudo ufw default deny incoming` と `sudo ufw default allow outgoing` の設定
- [ ] 必要なポートの開放
  - [ ] Flaskウェブサーバー用ポート（5000）の開放
    - `sudo ufw allow 5000/tcp`
  - [ ] Samba用ポート（137, 138, 139, 445）の開放
    - `sudo ufw allow 137,138,139,445/tcp`
- [ ] ファイアウォールの状態確認
  - [ ] `sudo ufw status` の実行と確認

#### 2.2 Samba設定の強化
- [ ] Samba設定ファイルの見直し
  - [ ] `/etc/samba/smb.conf` の編集
  - [ ] `valid users` の特定ユーザーに限定
- [ ] Sambaユーザー管理の強化
  - [ ] 不要なユーザーの削除
  - [ ] 強力なパスワードの設定確認
- [ ] Sambaサービスの再起動と動作確認
  - [ ] `sudo systemctl restart smbd` の実行
  - [ ] 設定変更後のアクセス確認

#### 2.3 HTTPSの導入およびFlaskアプリケーションのセキュリティ設定
- [ ] Let’s Encryptの利用（ドメインがある場合）
  - [ ] Certbotのインストール
    - `sudo apt-get install certbot python3-certbot-nginx`
  - [ ] SSL証明書の取得とNginx設定の自動更新
    - `sudo certbot --nginx -d your_domain.com`
- [ ] 自己署名証明書の作成（ローカルネットワークのみの場合）
  - [ ] OpenSSLを使用した証明書の作成
    - `openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/flask.key -out /etc/ssl/certs/flask.crt`
- [ ] Flaskアプリケーションの更新
  - [ ] HTTPS設定の追加
  - [ ] セキュリティ設定の確認

### 3. システム統合テスト
- [ ] 笑顔検出機能とセキュリティ設定の統合テスト
  - [ ] 笑顔検出時の自動撮影動作確認
  - [ ] セキュリティ設定後のシステム動作確認
- [ ] セキュリティ強化後のアクセス制御テスト
  - [ ] 不正アクセス試行と防御機能の確認
- [ ] システム全体の動作確認
  - [ ] 各機能の連携動作確認
  - [ ] 全体的なパフォーマンスと安定性の評価


